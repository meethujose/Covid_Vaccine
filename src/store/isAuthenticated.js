import { createSlice } from "@reduxjs/toolkit";
import jwt_decode from "jwt-decode";

const initialState = {
  isAuth: null,
  avatar: null,
  user_id :null,
  is_admin:null,
  first_name:null,
  last_name:null,
  user_data:null,
};

const isAuthenticated = createSlice({
  name: "isAuth",
  initialState,
  reducers: {
    isAuth(state, action) {
      state.isAuth = true;
      const decoded = jwt_decode(action.payload)
      localStorage.setItem("token_expiry", decoded.exp);
      state.avatar = 'data:image/jpeg;base64,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'
      state.user_id = decoded.user_id;
      state.email = decoded.username;
      state.is_admin = decoded.is_admin;
      state.first_name = decoded.first_name;
      state.last_name = decoded.last_name;
      state.user_data = decoded.user_data;
    },
    isNotAuth(state) {
      state.isAuth = false;
      localStorage.clear();
    },
  },
});

export const { isAuth, isNotAuth } = isAuthenticated.actions;
export default isAuthenticated.reducer;
